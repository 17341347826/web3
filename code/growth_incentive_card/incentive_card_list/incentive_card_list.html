<div ms-important="incentive_card_list" id="incentive_card_list">
    <xmp ms-widget="{is:'ms-three-menu-module'}"></xmp>
    <!--筛选条件-->
    <div class="common-select" >
        <div class="search-cont clearfix">
            <!--年级-->
            <div class="select">
                <div class="old-select">
                    <select data-duplex-changed="@gradeChange()" ms-duplex-number="@extend.fk_grade_id">
                        <!--ms-for: el in @grade_list-->
                        <option ms-attr="{value:el.grade_id}">
                            {{el.grade_name}}
                        </option>
                        <!--ms-for-end:-->
                    </select>
                </div>
            </div>
            <!--班级-->
            <div class="select">
                <div class="old-select">
                    <select data-duplex-changed="@classChange()" ms-duplex-number="@extend.fk_class_id">
                        <!--<option ms-attr="{value:''}">-->
                            <!--请选择班级-->
                        <!--</option>-->
                        <!--ms-for: el in @class_list-->
                        <option ms-attr="{value:el.class_id}">
                            {{el.class_name}}班
                        </option>
                        <!--ms-for-end:-->
                    </select>
                </div>
            </div>
            <div class="form-input">
                <input ms-duplex="@other.code" ms-on-blur="@codeChange()" placeholder="请输入学籍号" type="text"/>
            </div>
            <div class="form-input">
                <input ms-duplex="@other.name" ms-on-blur="@nameChange()" placeholder="请输入姓名" type="text"/>
            </div>
            <div class="form-input">
                <input class="form-width-md" data-am-datepicker="" id="my-datepicker" readonly
                       ms-attr="{value:@other.start_time}" ms-on-focus="@getCompleteDate"
                       ms-rules="{required:true}" required="" type="text" placeholder="请输入开始日期"/>
            </div>
            <div class="form-input">
                <input class="form-width-md" data-am-datepicker="" id="my-datepickers" readonly
                       ms-attr="{value:@other.end_time}" ms-on-focus="@getCompleteDates"
                       ms-rules="{required:true}" required="" type="text" placeholder="请输入结束日期"/>
            </div>
        </div>
    </div>
    <div class="content">
        <div class="list-con"  id="list-con">
            <!--显示方式-->
            <div class="dis-type" :if="@card_list.length>0">
                <div class="radios">
                    <label class="radios-name">显示方式：</label>
                    <label class="am-radio-inline">
                        <input type="radio" id="option1" ms-duplex="@html_display"  class="rdo" value="1">
                        <label ms-attr="{for:'option1'}">图文</label>
                    </label>
                    <label class="am-radio-inline" :click="@radio_table()">
                        <input type="radio" id="option2" ms-duplex="@html_display" class="rdo" value="2">
                        <label ms-attr="{for:'option2'}">表格</label>
                    </label>
                </div>
            </div>
            <!--table-->
            <div class="table-list" :visible="@html_display == 2 && @list_detail == 1 && @card_list.length>0">
                <div class="table_module am-padding-top-sm am-padding-bottom-sm">
                    <div id="class-module">
                        <table class="am-table am-table-hover">
                            <thead style="text-align: center">
                            <tr>
                                <td>序号</td>
                                <td>年级</td>
                                <td>班级</td>
                                <td>姓名</td>
                                <td>学籍号</td>
                                <td>获卡数量</td>
                                <td>操作</td>
                            </tr>
                            </thead>
                            <tbody>
                            <!--ms-for:($idx,el) in @card_list-->
                            <tr>
                                <td>{{@set_index($idx+1,@currentPage)}}</td>
                                <td>{{el.grade_name}}</td>
                                <td>{{el.class_name}}班</td>
                                <td>{{el.name}}</td>
                                <td>{{el.code}}</td>
                                <td>{{el.count_number}}</td>
                                <td><a class='tab-btn tab-details-btn' ms-on-click='@person_honor(el)' title='查看'></a></td>
                            </tr>
                            <!--ms-for-end:-->
                            </tbody>
                        </table>
                    </div>

                </div>
                <!--分页-->
                <div class="divide-page" ms-visible="@totalPageArr.length!=0 && @count>@extend.rows" data-am-widget="pagination">
                    <div class="page-info">
                        <span>共{{@count}}条数据</span>
                        <!--<span>当前为第{{@currentPage}}页</span>-->
                        <span>共{{@totalPage}}页</span>
                    </div>
                    <div class="pages">
                        <div class="first-page" ms-visible="@currentPage>3" ms-on-click="@currentPageDate(1)">
                            首页
                        </div>
                        <div class="pre-page" ms-visible="@currentPage != 1" ms-on-click="@currentPageDate(@currentPage-1)">
                            上一页
                        </div>
                        <!--ms-for: ($index,el) in @totalPageArr -->
                        <div class="com-page" ms-class="[el==@currentPage?'page-active':'']" ms-on-click="@currentPageDate(el)">
                            {{el}}
                        </div>
                        <!--ms-for-end:-->
                        <div class="next-page" ms-visible="@currentPage != @totalPage" ms-on-click="@currentPageDate(@currentPage+1)">
                            下一页
                        </div>
                        <div class="last-page" ms-visible="@currentPage != @totalPage" ms-on-click="@currentPageDate(@totalPage)">
                            末页
                        </div>
                    </div>
                    <div class="turn-page">
                        <div>跳转到：</div>
                        <div class="s-page"><input type="text" ms-duplex-number="@pageNo"/></div>
                        <div class="go-page" ms-on-click="@pageNOSure(@pageNo)">GO</div>
                    </div>
                </div>
            </div>
            <!--图文-->
            <div :visible="@html_display == 1">
                <!--ms-for:($idx,el) in @card_detail_list-->
                <div class="daily-person">
                    <!--学生基本信息-->
                    <div class="stu-info">
                        <div>
                            <!--头像-->
                            <div class="stu-head">
                                <div class="stu-img">
                                    <img ms-attr="{src:@url_img(@user_photo({guid:el.student_guid}))}">
                                </div>
                                <div class="stu-name">
                                    <span>{{el.name}}</span>
                                </div>
                            </div>
                            <div class="line-one"></div>
                            <!--学校信息-->
                            <div class="stu-school">
                                <div>
                                    <span>{{el.grade_name}} {{el.class_name}}班</span>
                                    <span>{{el.school_name}}</span>
                                    <span>{{@district_name}}</span>
                                    <span>{{el.create_time | date("yyyy-MM-dd HH:mm:ss")}}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--日常表现信息-->
                    <div class="daily-info">
                        <div class="three-index h-style">
                            <h3>成长激励卡名称:</h3>
                            <p>{{el.bzkmc}}</p>
                        </div>
                        <div class="record-des h-style">
                            <h3>发卡时间 ：</h3>
                            <p>{{el.hksj|date("yyyy-MM-dd")}}</p>
                        </div>
                        <div class="record-des h-style">
                            <h3>发卡人:</h3>
                            <p>{{el.fkzt | gl_type}}</p>
                        </div>
                        <div class="record-des h-style">卡片信息:</div>
                        <div class="d-p-img">
                            <!--<span class="person-name">{{el.name}}</span>-->
                            <img ms-attr="{src:@url_for(@data_change(el.b_fjdz)[0].guid)}">
                        </div>
                        <div class="record-des h-style">上传依据:</div>
                        <div class="d-p-img">
                            <!--ms-for:($index,al) in @el.img_arr-->
                            <img ms-attr="{src:@url_for(al.guid)}">
                            <!--ms-for-end:-->
                        </div>
                        <div class="text-content">
                            <h3 ms-visible="el.video_arr.length>0 || el.file_arr.length>0">材料名称:</h3>
                            <ul>
                                <li ms-for="el2 in @el.video_arr">
                                    <a ms-attr="{href:el2.down_href}">{{el2.file_name}}</a>
                                </li>
                                <li ms-for="el2 in @el.file_arr">
                                    <a ms-attr="{href:el2.down_href}">{{el2.file_name}}</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!--ms-for-end:-->
                <div class="none-img-wrap">
                    <img src="../../../../common/images/none.png"  alt="图片" ms-visible="card_detail_list.length==0">
                </div>

            </div>
        </div>
    </div>
</div>
