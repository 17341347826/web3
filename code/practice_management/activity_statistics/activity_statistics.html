<div ms-important="activity_statistics" id="activity_statistics">
    <xmp ms-widget="{is:'ms-three-menu-module'}"></xmp>
    <!--公有筛选条件-->
    <div class="common-select">
        <div class="search-cont clearfix">
            <!--年级-->
            <div class="select">
                <div class="old-select">
                    <select ms-duplex="@grade_info" data-duplex-changed="@grade_change()">
                        <option value="">请选择年级</option>
                        <!--ms-for: el in @grade_list-->
                        <option ms-attr="{value:el.id+'|'+el.grade_name}">
                            {{el.grade_name}}
                        </option>
                        <!--ms-for-end:-->
                    </select>
                </div>
            </div>
            <!--学年学期-->
            <div class="select">
                <div class="old-select">
                    <select ms-duplex-number="@extend.fk_xq_id" data-duplex-changed="@sem_change()">
                        <!--ms-for: idx,el in @sem_list-->
                        <option ms-attr="{value:el.id}">
                            {{el.semester_name}}
                        </option>
                        <!--ms-for-end:-->
                    </select>
                </div>
            </div>
        </div>
    </div>
    <!--市-->
    <div ms-if="@highest_level==2">
        <div class="analysis-class">
            <!--highchart图-->
            <div id="city_container" class="am-fl char-tu" ms-css="{height:@city_height}" :if="@activity_city.length > 0"></div>
            <div class="am-fl con-right" ms-class="[@activity_city.length>0 ? 'table-width':'table-width-all']">
                <div class="title">学生综合实践活动发布情况（市）</div>
                <div class="table-module">
                    <table class="am-table am-table-bordered am-fr">
                        <thead>
                        <tr>
                            <th>市</th>
                            <th>年级</th>
                            <th>活动发布数量</th>
                            <th>参与活动人数</th>
                            <th>学生实践参与率</th>
                            <th>受欢迎程度</th>
                            <th>活动开展效果</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ms-visible="@activity_city.length == 0">
                            <td ms-attr="{colspan:7}">暂无数据</td>
                        </tr>
                        <!--ms-for: ($idx,el) in @activity_city-->
                        <tr>
                            <td :visible="$idx == 0" ms-attr="{rowspan:@activity_city.length}">{{el.city}}</td>
                            <td>{{el.grade_name}}</td>
                            <td>{{el.fbcs}}</td>
                            <td>{{el.hdrc}}</td>
                            <td>{{@percentage_num(el.hdrc,el.zrs)}}</td>
                            <td>{{el.sf_my/el.zrs|number(2,".")}}</td>
                            <td>{{el.sf_qd/el.zrs|number(2,".")}}</td>
                        </tr>
                        <!--ms-for-end:-->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!--区-->
    <div ms-if="@highest_level==2 || @highest_level==3">
        <div class="analysis-class">
            <!--highchart图-->
            <div id="area_container" class="am-fl char-tu" ms-css="{height:@area_height}"
                 :if="@activity_city.length > 0" ms-class="[@highest_level==2 ? 'chart-top':'']"></div>
            <div class="am-fl con-right" ms-class="[@activity_city.length>0 ? 'table-width':'table-width-all']">
                <div class="title">学生综合实践活动发布情况（区县）</div>
                <!--区县：市级用户才会有筛选条件-->
                <div class="common-select" :visible="@highest_level==2">
                    <div class="search-cont clearfix">
                        <!--区县-->
                        <div class="select">
                            <div class="old-select">
                                <select ms-duplex="@area_info"  data-duplex-changed="@area_change()">
                                    <option ms-attr="{value:''}">请选择区县</option>
                                    <!--ms-for: el in @area_list-->
                                    <option ms-attr="{value:el.district}">{{el.district}}</option>
                                    <!--ms-for-end:-->
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="table-module">
                    <table class="am-table am-table-bordered am-fr">
                        <thead>
                        <tr>
                            <th>区县</th>
                            <th>年级</th>
                            <th>活动发布数量</th>
                            <th>参与活动人数</th>
                            <th>学生实践参与率</th>
                            <th>受欢迎程度</th>
                            <th>活动开展效果</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ms-visible="@activity_area.length == 0">
                            <td ms-attr="{colspan:7}">暂无数据</td>
                        </tr>
                        <!--ms-for: ($idx,el) in @activity_area-->
                        <tr>
                            <td ms-attr="{rowspan:@get_rowspan($idx,el.district,@activity_area,'district')}"
                                :visible="$idx == 0 || @get_rowspan($idx,el.district,@activity_area,'district') >= 1">{{el.district}}</td>
                            <td>{{el.grade_name}}</td>
                            <td>{{el.fbcs}}</td>
                            <td>{{el.hdrc}}</td>
                            <td>{{@percentage_num(el.hdrc,el.zrs)}}</td>
                            <td>{{el.sf_my/el.zrs|number(2,".")}}</td>
                            <td>{{el.sf_qd/el.zrs|number(2,".")}}</td>
                        </tr>
                        <!--ms-for-end:-->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!--校-->
    <div>
        <div class="analysis-class">
            <!--highchart图-->
            <div id="school_container" class="am-fl char-tu" ms-css="{height:@school_height}"
                 :if="@activity_city.length > 0" ms-class="[(@highest_level==2 || @highest_level==3) ? 'chart-top':'']"></div>
            <div class="am-fl con-right"  ms-class="[@activity_city.length>0 ? 'table-width':'table-width-all']">
                <div class="title">学生综合实践活动发布情况（校）</div>
                <!--筛选条件-->
                <div class="common-select">
                    <div class="search-cont clearfix">
                        <!--区县：市级用户才会有筛选条件-->
                        <div class="select" ms-if="@highest_level == 2" >
                            <div class="old-select">
                                <select ms-duplex="@school_area_info"  data-duplex-changed="@school_area_change()">
                                    <option ms-attr="{value:''}">请选择区县</option>
                                    <option ms-for="el in area_list" ms-attr="{value:el.district}" >{{el.district}}</option>
                                </select>
                            </div>
                        </div>
                        <!--学校：市级、区县级用户才有的筛选条件-->
                        <div class="select" ms-if="@highest_level == 2 || @highest_level == 3">
                            <div class="old-select">
                                <select  ms-duplex-number="@extend.fk_xx_id" data-duplex-changed="@school_change()">
                                    <option ms-attr="{value:''}">请选择学校</option>
                                    <!--ms-for: el in school_list-->
                                    <option ms-attr="{value:el.id}">{{el.schoolname}}</option>
                                    <!--ms-for-end:-->
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="table-module">
                    <table class="am-table am-table-bordered">
                        <thead>
                        <tr>
                            <th>区县</th>
                            <th>学校</th>
                            <th>年级</th>
                            <th>活动发布数量</th>
                            <th>参与活动人数</th>
                            <th>学生实践参与率</th>
                            <th>受欢迎程度</th>
                            <th>活动开展效果</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ms-visible="@activity_school.length == 0">
                            <td ms-attr="{colspan:8}">暂无数据</td>
                        </tr>
                        <!--ms-for: ($idx,el) in @activity_school-->
                        <tr>
                            <td  ms-attr="{rowspan:@get_rowspan($idx,el.district,@activity_school,'district')}" :visible="$idx == 0 || @get_rowspan($idx,el.district,@activity_school,'district') >= 1">{{el.district}}</td>
                            <td  ms-attr="{rowspan:@get_rowspan($idx,el.school_name,@activity_school,'school_name')}" :visible="$idx == 0 || @get_rowspan($idx,el.school_name,@activity_school,'school_name') >= 1">{{el.school_name}}</td>
                            <!--<td>{{el.school_name}}</td>-->
                            <td>{{el.grade_name}}</td>
                            <td>{{el.fbcs}}</td>
                            <td>{{el.hdrc}}</td>
                            <td>{{@percentage_num(el.hdrc,el.zrs)}}</td>
                            <td>{{el.sf_my/el.zrs|number(2,".")}}</td>
                            <td>{{el.sf_qd/el.zrs|number(2,".")}}</td>
                        </tr>
                        <!--ms-for-end:-->
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>
</div>